<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="DFTV Simulcast" />
    <meta
      property="og:description"
      content="The Performance Agency presents Dripfeed E06: Succubus by Tarren Johnson & Joel Cocks. 15min video on continuous loop • Jan 31 – Feb 2, 2025."
    />
    <meta
      property="og:image"
      content="https://dripfeed.tv/the-performance-agency-presents/dripfeed_succubus_tarren_johnson_and_joel_cocks.jpg"
    />
    <meta
      property="og:image:alt"
      content="DFTV Simulcast - Dripfeed E06: Succubus"
    />
    <meta name="twitter:title" content="DFTV Simulcast" />
    <meta
      name="twitter:description"
      content="The Performance Agency presents Dripfeed E06: Succubus by Tarren Johnson & Joel Cocks. 15min video on continuous loop • Jan 31 – Feb 2, 2025."
    />
    <meta
      name="twitter:image"
      content="https://dripfeed.tv/the-performance-agency-presents/dripfeed_succubus_tarren_johnson_and_joel_cocks.jpg"
    />
    <meta
      name="twitter:image:alt"
      content="DFTV Simulcast - Dripfeed E06: Succubus"
    />
    <link rel="icon" href="./favicon.ico" />
    <title>The Performance Agency Presents: DFTV Simulcast</title>
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: Geneva, Arial, Helvetica, Swiss, SunSans-Regular;
        background: black;
      }

      button {
        margin: 2px;
        background: #111;
        color: gray;
        font-size: 12px;
        padding: 3px 10px;
        outline: none;
        border: 1px solid #666;
        border-bottom: 1px solid #222;
        border-right: 1px solid #222;
        letter-spacing: 0.03em;
        font-family: Geneva, Arial, Helvetica, Swiss, SunSans-Regular;
      }

      .iframe-wrapper {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
        margin: 0;

        width: 100%;
        height: 100%;
        aspect-ratio: 4 / 3; /* Standard approach */
        max-height: 85vh;
        max-width: 100%;
        overflow: hidden;
        background: black;
      }

      @supports not (aspect-ratio: 4 / 3) {
        .iframe-wrapper {
          width: 100%;
          height: 100%;
        }

        #vimeoPlayer {
          width: 100%;
          height: 100%;
        }
      }
      #vimeoPlayer {
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
      }

      #unmuteButton {
        background: rgb(21, 76, 175);
        color: lightblue;
        cursor: pointer;
        z-index: 101;
      }

      #statusMessage {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 18px;
        color: silver;
        text-align: center;
        display: none;
      }

      #infoOverlay {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 20px;
        box-sizing: border-box;
        overflow-y: auto;
        z-index: 9999;
        font-size: 13px;
        line-height: 1.5;
        color: rgb(226, 226, 226);
        background: gray;
      }

      #infoOverlay .buffer {
        height: 100px;
        width: 100%;
      }

      #infoOverlay p {
        max-width: 500px;
      }

      #closeInfo {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
        background: #afafaf;
        color: #222;
      }
      footer {
        position: fixed;
        bottom: 0px;
        width: 100vw;
        left: 0px;
        background: none;
        color: white;
        padding: 0;
        font-size: 12px;
        font-weight: bold;
        box-sizing: border-box;
        height: 7.5vh;
        z-index: 101;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: Geneva, Arial, Helvetica, Swiss, SunSans-Regular;
      }

      a,
      a:visited {
        color: rgb(226, 226, 226);
        text-decoration: none;
        cursor: pointer;
      }

      @media (max-width: 767px) {
        #fullscreenButton {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Red overlay with Unmute Button and Info Button -->
    <footer>
      <button id="infoButton">Info</button>
      <button id="fullscreenButton">Fullscreen</button>
      <button id="unmuteButton">Unmute</button>
    </footer>

    <!-- Video -->
    <div class="iframe-wrapper" id="expandedVideo">
      <iframe
        id="vimeoPlayer"
        src="https://player.vimeo.com/video/1051795128?h=e8353f040a&badge=0&autopause=0&muted=1&autoplay=1&loop=1&controls=0"
        frameborder="0"
        allow="autoplay; fullscreen; clipboard-write"
        title="[WIP] Dripfeed Episode 6: Succubus"
      ></iframe>
    </div>

    <!-- Status Message -->
    <div id="statusMessage">Simulcast starts soon.</div>

    <!-- Info Overlay -->
    <div id="infoOverlay">
      <button id="closeInfo">Close</button>
      <div class="buffer"></div>
      <p>
        The Performance Agency presents
        <br /><br />

        Dripfeed Episode 6: Succubus
        <br />
        Tarren Johnson & Joel Cocks
        <br />
        2025, 15 minutes
        <br /><br />

        Three-day simulcast on continuous loop<br />
        31.01–02.02.2025

        <br /><br />

        Dripfeed.tv (2018–) is an ongoing video series by Tarren Johnson and
        Joel Cocks that develops as a fragmented fiction, capturing the
        boundary between creation and collapse. Episodes blend B-roll footage,
        directorial cues, poetic dialogue, and actors grappling with rehearsal
        and repetition. Drawing from formats spanning vaudeville to social
        media, the series explores how narratives fracture, evolve, and resist
        coherence, reflecting the messy interplay of performance, trauma, and
        collective memory.
        <br /><br />

        This simulcast of Dripfeed.tv is presented in conjunction with the
        opening of "Blank Banquet", a solo exhibition by Joel Cocks and Tarren
        Johnson at The Physics Room, curated by Jane Wallace.
        <br /><br />

        Voiceover: Olamiju Fajemisin
        <br />
        Featuring: Medhi Hamadouchi, Salber Lee Williams
        <br />
        Costume: Marcus Karkhof
        <br />
        Partners: Cité internationale des arts, Organ Vida Festival, The
        Physics Room, The Performance Agency
        <br /><br />
      </p>
    </div>

    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
      const vimeoPlayer = new Vimeo.Player('vimeoPlayer');
      const unmuteButton = document.getElementById('unmuteButton');
      const infoButton = document.getElementById('infoButton');
      const infoOverlay = document.getElementById('infoOverlay');
      const closeInfo = document.getElementById('closeInfo');
      const statusMessage = document.getElementById('statusMessage');

      const startDate = new Date('2025-01-31T10:00:00Z');
      const endDate = new Date('2025-02-02T10:00:00Z');

      // Handle unmute/mute toggle
      unmuteButton.addEventListener('click', () => {
        vimeoPlayer.getMuted().then((isMuted) => {
          if (isMuted) {
            vimeoPlayer.setMuted(false);
            unmuteButton.style.background = '#111';
            unmuteButton.style.color = 'gray';
            unmuteButton.innerHTML = 'Mute';
          } else {
            vimeoPlayer.setMuted(true);
            unmuteButton.style.background = 'rgb(21, 76, 175)';
            unmuteButton.style.color = 'lightblue';
            unmuteButton.innerHTML = 'Unmute';
          }
        });
      });

      // Handle info button click
      infoButton.addEventListener('click', () => {
        infoOverlay.style.display = 'block';
        vimeoPlayer.setMuted(true);
        unmuteButton.style.background = 'rgb(21, 76, 175)';
        unmuteButton.style.color = 'lightblue';
        unmuteButton.innerHTML = 'Unmute';
      });

      // Handle close info button click
      closeInfo.addEventListener('click', () => {
        infoOverlay.style.display = 'none';
      });

      // Sync video to simulcast time
      function syncVideo() {
        const now = new Date();
        const iframeWrapper = document.getElementById('expandedVideo');
        const vimeoPlayerFrame = document.getElementById('vimeoPlayer');
        const unmuteButton = document.getElementById('unmuteButton');
        const fullscreenButton = document.getElementById('fullscreenButton');

        if (now >= startDate && now <= endDate) {
          // Video should be accessible
          const elapsed = (now - startDate) / 1000; // Time since start in seconds
          vimeoPlayer.getDuration().then((duration) => {
            const position = elapsed % duration; // Calculate where the video should start
            vimeoPlayer.setCurrentTime(position).then(() => {
              vimeoPlayer.play().catch((error) => {
                console.error('Autoplay error:', error);
              });
            });
          });
          statusMessage.style.display = 'none'; // Hide any status message
          iframeWrapper.style.display = 'flex'; // Show video
          unmuteButton.style.display = 'inline-block'; // Show unmute button
          fullscreenButton.style.display = 'inline-block'; // Show fullscreen button
        } else {
          // Video should not be accessible
          statusMessage.innerText =
            now < startDate
              ? 'DFTV Simulcast starts soon'
              : 'DFTV Simulcast has ended';
          statusMessage.style.display = 'block';
          iframeWrapper.style.display = 'none'; // Hide video
          vimeoPlayerFrame.remove(); // Remove iframe to prevent access
          unmuteButton.style.display = 'none'; // Hide unmute button
          fullscreenButton.style.display = 'none'; // Hide fullscreen button
        }
      }

      const fullscreenButton = document.getElementById('fullscreenButton');

      // Handle fullscreen button click
      fullscreenButton.addEventListener('click', () => {
        const iframeWrapper = document.getElementById('expandedVideo');

        if (iframeWrapper.requestFullscreen) {
          iframeWrapper.requestFullscreen();
        } else if (iframeWrapper.webkitRequestFullscreen) {
          // Support for iPads and Safari
          iframeWrapper.webkitRequestFullscreen();
        } else if (iframeWrapper.msRequestFullscreen) {
          iframeWrapper.msRequestFullscreen();
        }

        vimeoPlayer.setMuted(false);
        unmuteButton.style.background = '#111';
        unmuteButton.style.color = 'gray';
        unmuteButton.innerHTML = 'Mute';
      });

      // Initial setup
      vimeoPlayer.setMuted(true); // Start muted
      syncVideo();

      document.addEventListener('fullscreenchange', () => {
        const iframeWrapper = document.getElementById('expandedVideo');
        if (!document.fullscreenElement) {
          // Restore original styles
          iframeWrapper.style.width = '100vw';
          iframeWrapper.style.height = 'auto';
          iframeWrapper.style.maxHeight = 'calc(100vh)';
          iframeWrapper.style.maxWidth = 'calc(100vh * (4 / 3))';
          iframeWrapper.style.aspectRatio = '4 / 3';
          // Force repaint
          iframeWrapper.style.opacity = '0.99'; // Temporarily change opacity
          setTimeout(() => {
            iframeWrapper.style.opacity = '1'; // Restore opacity
          }, 50);
        }
      });

      document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
          location.reload(); // Refresh the page only when exiting fullscreen
        }
      });

      document.addEventListener('webkitfullscreenchange', () => {
        if (!document.webkitFullscreenElement) {
          location.reload();
        }
      });

      document.addEventListener('mozfullscreenchange', () => {
        if (!document.mozFullScreen) {
          location.reload();
        }
      });

      document.addEventListener('MSFullscreenChange', () => {
        if (!document.msFullscreenElement) {
          location.reload();
        }
      });

      function isIpad() {
        return (
          navigator.userAgent.includes('iPad') ||
          (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1) // Detects newer iPads
        );
      }

      window.onload = function () {
        if (isIpad()) {
          document.getElementById('fullscreenButton').style.display = 'none';
        }
      };
    </script>
  </body>
</html>
